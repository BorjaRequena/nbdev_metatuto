---

title: Tutorial walkthrough

keywords: fastai
sidebar: home_sidebar

summary: "We do a walkthrough the nbdev tutorial so that we understand how it works :) The original tutorial can be found [here](https://nbdev.fast.ai/tutorial/)"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_tutorial.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
    
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This is a guide for me to follow while doing a live tutorial for my fellow jupyter notebook/lab users at ICFO. I'm mainly doing this guide to get familiar with nbdev and, hopefully, don't look at it during the tutorial.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Getting-started">Getting started<a class="anchor-link" href="#Getting-started">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The first thing to do is to actually install nbdev via <code>pip install nbdev</code>. At some point we will also need <code>fastcore</code> that can be installed in the same way <code>pip install fastcore</code>.</p>
<p>Quickly set a <a href="https://github.com/">GitHub</a> account if there is not any.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Set-up-a-repo-in-GitHub">Set up a repo in GitHub<a class="anchor-link" href="#Set-up-a-repo-in-GitHub">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Repo-from-template">Repo from template<a class="anchor-link" href="#Repo-from-template">&#182;</a></h3><p>The easiest way to get started is to start a repo from the <a href="https://github.com/fastai/nbdev_template/generate">nbdev template</a> in GitHub. This link only works if loged into GitHub and can be found in the original tutorial.</p>
<p>{% include image.html file="/nbdev_metatuto/images/repo_from_template.png" %}</p>
<p>We can name the repo whatever we want. It does not matter at all so feel free to be creative!</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Edit-settings.ini">Edit settings.ini<a class="anchor-link" href="#Edit-settings.ini">&#182;</a></h3><p>Edit the file directly in GitHub: uncomment and fill the first mandatory fields.</p>
<p>{% include image.html file="/nbdev_metatuto/images/edit_settingsini.png" %}</p>
<p>Commit the changes with whatever message you feel like providing to yourself or the future collaborators of the repo.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GitHub-Pages">GitHub Pages<a class="anchor-link" href="#GitHub-Pages">&#182;</a></h3><p>With <a href="https://pages.github.com/">GitHub pages</a> we can have our automatically-generated documentation by nbdev hosted in a free server based on <a href="https://jekyllrb.com/">jekyll</a>.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Clone">Clone<a class="anchor-link" href="#Clone">&#182;</a></h3><p>Time to clone the repo! Do as always, I personally use <a href="https://www.gitkraken.com/">GitKraken</a>, but <code>git clone git@github.com:username/projectname</code> does the job.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Hooks">Hooks<a class="anchor-link" href="#Hooks">&#182;</a></h3><p>The last step before getting hands on is to install the git hooks. Within the repo directory, run <code>nbdev_install_git_hooks</code> in the terminal. This will strip the notebooks from a lot of metadata that generally causes commit conflicts out of nowhere.</p>
<p>Nonetheless, if we ever get a conflict, we can also run <code>nbdev_fix_merge filename.ipynb</code> and it will do some fixing. If the conflict still remains, it will generate a merged file with all the cells with highlighted conflicts as in any other document.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Our-package">Our package<a class="anchor-link" href="#Our-package">&#182;</a></h2><p>Let's start with the code editing.</p>
<p>Open a jupyter notebook/lab and open <code>00_core.ipynb</code>. The <code>core</code> is the name of the package that will be <code>lib_name.core</code> and set with <code># default_exp core</code> (names need to be consistent). The number is completely optional although recommended.</p>
<p>There are a few comands or special coments that will tell nbdev what to include where:</p>
<ul>
<li>In the first cell <code># default_exp module_name</code> tells nbdev to export the notebook as <code>lib_name.module_name.py</code></li>
<li><code>#hide</code> prevents the cell from appearing in the documentation and excludes it from the module</li>
<li><code>#export</code> includes the cell in the exported package and the documentation</li>
<li><code>#exports</code> includes the cell in the package and the source code in the documentation</li>
<li>Not putting anything will only include the cell in the documentations</li>
</ul>
<p>These comments need to be always in the first line of the cell.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Edits-on-00_core.ipynb">Edits on <code>00_core.ipynb</code><a class="anchor-link" href="#Edits-on-00_core.ipynb">&#182;</a></h3><p>Start by changing the module name and writing down a description. Try to be creative.</p>
<p>Then, proceed to define a function</p>
<div class="highlight"><pre><span></span><span class="c1">#export</span>
<span class="k">def</span> <span class="nf">say_hi</span><span class="p">(</span><span class="n">to</span><span class="p">):</span>
    <span class="s2">&quot;Enthusiastically say hi to someone&quot;</span>
    <span class="k">return</span> <span class="n">f</span><span class="s1">&#39;Hii {to}!&#39;</span>
</pre></div>
<p>Since I put <code>#export</code> also in the tutorial, we can see this function right below.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">

</div>
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="say_hi" class="doc_header"><code>say_hi</code><a href="https://github.com/fastai/nbdev_metatuto/tree/master/nbdev_metatuto/tutorial.py#L6" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>say_hi</code>(<strong><code>to</code></strong>)</p>
</blockquote>
<p>Enthusiastically say hi to someone</p>

</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Feel free to add a markdown description. The string will be the function descrption in the documentation.</p>
<p>We can also add tests. It is always good to have them in the documentations as they show new users what behavior they should expect. For that we will need to import <code>fastcore</code>. Since we don't want it to be included in the docs, we can just either put it in the previous cell with</p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="kn">from</span> <span class="nn">nbdev.showdoc</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<p>to hide both imports, or we can just make a whole new cell with <code>#hide</code>. To test the function, we can write:</p>
<div class="highlight"><pre><span></span><span class="c1">#hide</span>
<span class="kn">from</span> <span class="nn">fastcore.test</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<div class="highlight"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">say_hi</span><span class="p">(</span><span class="s2">&quot;Bitz&quot;</span><span class="p">),</span> <span class="s2">&quot;Hii Bitz!&quot;</span><span class="p">)</span>
</pre></div>
<p>In this notebook's source code we can find both cells: one with <code>#hide</code> and the other one with the test. Provided that no command is written for the test cell, it is included in this documentation (right below) but not in the package.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_eq</span><span class="p">(</span><span class="n">say_hi</span><span class="p">(</span><span class="s2">&quot;Bitz&quot;</span><span class="p">),</span><span class="s2">&quot;Hii Bitz!&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This can also be done with <code>assert</code> (notice that this time I didn't embed the code in the markdown and what we see now is the exported cell)</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">assert</span> <span class="n">say_hi</span><span class="p">(</span><span class="s2">&quot;Gorka&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Hii Gorka!&quot;</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Build-the-library">Build the library<a class="anchor-link" href="#Build-the-library">&#182;</a></h3><p>We can now proceed to build the python module with nbdev. In the terminal, go to our project folder and run <code>nbdev_build_lib</code>. For this tutorial, we now have a new <code>nbdev_metatuto</code> folder where we can find <code>tutorial.py</code> and <code>core.py</code>.</p>
<div class="highlight"><pre><span></span>$ nbdev_build_lib
Converted 00_tutorial.ipynb.
Converted 01_core.ipynb.
Converted index.ipynb.
</pre></div>
<p>Basically, the project becomes a python package and each notebook is a module.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Index">Index<a class="anchor-link" href="#Index">&#182;</a></h2><p><code>index.ipynb</code> will be the source for the documentation home page and the project readme.</p>
<p>We need to change the first cell to import our library. Change the name of the library to yours, e.g., <code>nbdev_metatuto.core</code> and <code>nbdev_metatuto.tutorial</code> in my case. Write down a brief description and provide a function example to ensure that it works.</p>
<p>{% include image.html file="/nbdev_metatuto/images/index_edit.png" %}</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Build-the-docs">Build the docs<a class="anchor-link" href="#Build-the-docs">&#182;</a></h2><p>We are now ready to build the documentation. In the terminal, go to the project folder and run <code>nbdev_build_docs</code></p>
<div class="highlight"><pre><span></span>$ nbdev_build_docs 
converting: /home/brequena/GitHub/nbdev_metatutorial/00_tutorial.ipynb
converting: /home/brequena/GitHub/nbdev_metatutorial/index.ipynb
converting: /home/brequena/GitHub/nbdev_metatutorial/01_core.ipynb
converting /home/brequena/GitHub/nbdev_metatutorial/index.ipynb to README.md
docs/images/
</pre></div>
<p>If we go to the <code>docs</code> directory, we can see now the files <code>core.html</code>, <code>index.html</code>, <code>tutorial.html</code> for this tutorial.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Commit-to-GitHub">Commit to GitHub<a class="anchor-link" href="#Commit-to-GitHub">&#182;</a></h2><p>Commit! We can see all the changes with <code>git status</code>. To proceed run <code>git add -A</code> and commit with <code>git commit -am 'commit message'</code>.</p>
<p>Notice that the <code>__init__.py</code> is created automatically by default, but we can edit it freely. For example, if we add the line</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.core</span> <span class="kn">import</span> <span class="o">*</span>
</pre></div>
<p>we can then just import the library without specifying the core in our index.</p>

</div>
</div>
</div>
</div>
 

